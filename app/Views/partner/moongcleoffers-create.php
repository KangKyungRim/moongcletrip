<!DOCTYPE html>
<html lang="ko">

<?php

$selectedPartnerIdx = $data['selectedPartnerIdx'];
$selectedPartner = $data['selectedPartner'];

?>

<style>
    .flatpickr-wrapper {
        width: 95%;
    }

    #benefitEnter:focus {
        outline: none !important;
        border: 0px !important;
        box-shadow: none !important;
    }
</style>

<!-- Head -->
<?php include $_SERVER['DOCUMENT_ROOT'] . "/../app/Views/partner/blocks/head.php"; ?>
<!-- Head -->

<body class="g-sidenav-show  bg-gray-100">

    <!-- Side Menu -->
    <?php include $_SERVER['DOCUMENT_ROOT'] . "/../app/Views/partner/blocks/sidemenu.php"; ?>
    <!-- Side Menu -->

    <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg">

        <!-- Navbar -->
        <nav class="navbar navbar-main navbar-expand-lg position-sticky mt-4 top-1 px-0 mx-4 shadow-none border-radius-xl z-index-sticky" id="navbarBlur" data-scroll="true">
            <div class="container-fluid py-1 px-3">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb bg-transparent mb-14 pb-0 pt-1 px-0 me-sm-6 me-5">
                        <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="javascript:;">Pages</a></li>
                        <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="javascript:;">Î≠âÌÅ¥Îîú</a></li>
                        <li class="breadcrumb-item text-sm text-dark active" aria-current="page">Ïã†Í∑ú Î≠âÌÅ¥Îîú ÏÉùÏÑ±</li>
                    </ol>
                    <h6 class="font-weight-bolder mb-0">Ïã†Í∑ú Î≠âÌÅ¥Îîú ÏÉùÏÑ±</h6>
                </nav>

                <!-- Navigation Bar -->
                <?php include $_SERVER['DOCUMENT_ROOT'] . "/../app/Views/partner/blocks/navbar.php"; ?>
                <!-- Navigation Bar -->

            </div>
        </nav> 
        <!-- End Navbar -->

        <div class="container-fluid py-4">
            <div class="row">
                <div class="col-12 d-flex align-items-start gap-6">
                    <div class="mobileWrap position-sticky" style="min-width: 23rem; width: auto; top: 10rem;">
                        <div class="mobile">
                            <div class="scrollWrap">
                                <div class="container">     
                                    <div class="notification">
                                        <div class="d-flex gap-3">
                                            <div class="logo">
                                                <img src="/assets/app/images/common/logo.png" alt="" style="width:45px;">
                                            </div>
                                            <div class="pt-2">
                                                <h3 class="text-sm" id="moongcledeal_customTitle">
                                                    Î≠âÌÅ¥Îü¨Îãò Ï∑®Ìñ•Ïóê ÎßûÎäî Ïó¨ÌñâÏùÑ Ï∞æÏïòÏñ¥Ïöî!
                                                </h3>
                                                <p class="text-xs" id="moongcledeal_customMessage" style="width: 100%; overflow: hidden; word-break: keep-all;">
                                                    Îì±Î°ùÎêú Î≠âÌÅ¥ÌÉúÍ∑∏ Ï∂îÏ≤ú ÏàôÏÜå <?= $data['partner']->partner_name; ?>! ÎìúÎîîÏñ¥ Î∞úÍ≤¨ÌñàÏñ¥Ïöî. ÏßÄÍ∏à ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî! üåü
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="promotion">
                                        <div class="d-flex align-items-center gap-2 px-2">
                                            <h3 class="text-sm">
                                                Î≠âÌÅ¥Îîú
                                            </h3>
                                            <div class="tag">
                                                <?= ($data['partner']->partner_category = "stay") ? "ÏàôÎ∞ï" : ""; ?>
                                            </div>
                                        </div>

                                        <p class="hashtags px-2" id="moongcledeal_tag" style="
                                            display: -webkit-box;
                                            -webkit-line-clamp: 2;
                                            -webkit-box-orient: vertical;
                                            overflow: hidden;
                                            text-overflow: ellipsis;
                                            word-wrap: break-word;
                                        ">
                                            <!-- ÌÉúÍ∑∏ ÏûÖÎ†• Ï∂îÍ∞Ä ÏòÅÏó≠ -->
                                        </p>

                                        <?php
                                            // Ïù¥ÎØ∏ÏßÄ Í≤ΩÎ°ú
                                            $imagePathsRating = '';
                                            $imagePaths = explode(':-:', $data['partner']->image_paths);

                                            if (!empty($imagePaths)) {
                                                foreach ($imagePaths as $imagePath) {
                                                    $imagePathsRating = $imagePath;
                                                }
                                            }
                                         ?>
                                        <div class="deal-card">
                                            <div class="thumb__wrap">
                                                <p class="thumb__img large">
                                                    <?php if (!empty($data['partner']->image_paths)) : ?>
                                                        <img src="<?= $imagePathsRating; ?>" alt="ÌååÌä∏ÎÑà Ïù¥ÎØ∏ÏßÄ">
                                                    <?php endif ?>
                                                </p>
                                                <div class="thumb__con">
                                                    <div class="thumb-badge">
                                                        ÏµúÎåÄ 
                                                        <span class="d-inline-block mx-1" id="discountViewMini">5%</span>
                                                        Ìï†Ïù∏!
                                                    </div>
                                                    <img src="/assets/app/images/common/ico_heart_black.svg" alt="ÌïòÌä∏" class="like">
                                                    <p class="detail-sub">
                                                        <span><?= $selectedPartner->partner_address1; ?></span>

                                                        <?php if (!empty($data['partner']->types)) : ?>
                                                            <span><?= str_replace(':-:', ', ', $data['partner']->types); ?></span>
                                                        <?php endif ?>

                                                        <?php
                                                        $stayRating = '';
                                                        $stayTags = explode(':-:', $data['partner']->tags);

                                                        if (!empty($stayTags)) {
                                                            foreach ($stayTags as $stayTag) {
                                                                if (in_array($stayTag, ['1ÏÑ±', '2ÏÑ±', '3ÏÑ±', '4ÏÑ±', '5ÏÑ±'])) {
                                                                    $stayRating = $stayTag;
                                                                    break;
                                                                }
                                                            }
                                                        }
                                                        ?>
                                                        <?php if ($stayRating): ?>
                                                            <span><?= $stayRating; ?></span>
                                                        <?php endif; ?>
                                                    <p class="detail-name"><?= $selectedPartner->partner_name; ?></p>
                                                </div>
                                                <div class="thumb__price">
                                                    <div>
                                                        <p class="sale-percent" id="discountView">5%</p>
                                                        <p class="default-price">
                                                            ÏùºÎ∞ò ÏöîÍ∏à
                                                        </p>
                                                        <p class="sale-price">
                                                            Ìï†Ïù∏Í∞Ä ~ <span style="font-weight: 400; font-size: 13px;">(*Î∞ï)</span>
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="thumb__gift">
                                                    <ul id="moongcledeal_benefit">
                                                        <!-- Ìè¨Ìï® ÌòúÌÉù Ï∂îÍ∞Ä ÏòÅÏó≠ -->
                                                        <li class="benefit-list-item defaultDiscount">5% Ìï†Ïù∏</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="cta-button">ÏûêÏÑ∏Ìûà Î≥¥Í∏∞</div>
                                        </div>
                                    </div>                                    
                                </div>
                            </div>

                            <div class="bottom-navi__wrap">
                                <ul class="bottom-navi__list">
                                    <li class="navi navi-home ">
                                        <a>
                                            <img src="/assets/app/images/common/ico_home.png" alt="Ìôà">
                                            <span>Ìôà</span>
                                        </a>
                                    </li>
                                    <li class="navi navi-search ">
                                        <a>
                                            <img src="/assets/app/images/common/ico_search.png" alt="Í≤ÄÏÉâ">
                                            <span>Í≤ÄÏÉâ</span>
                                        </a>
                                    </li>
                                    <li id="moongcledealBubble" class="navi navi-logo ">
                                        <a>
                                            <div id="lottie-container" class="ico ico-logo">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 42" width="42" height="42" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clipPath id="__lottie_element_2"><rect width="42" height="42" x="0" y="0"></rect></clipPath></defs><g clip-path="url(#__lottie_element_2)"><g transform="matrix(1.2989829778671265,0,0,1.2989829778671265,-6.278642654418945,-6.278642654418945)" opacity="0.2881355932204238" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,63,63)" fill-opacity="1" d=" M33.19409942626953,10.714699745178223 C30.13409996032715,8.114119529724121 25.25040054321289,8.568860054016113 21.006200790405273,11.444100379943848 C16.757299423217773,8.564120292663574 11.873600006103516,8.114119529724121 8.813590049743652,10.714699745178223 C4.834650039672852,14.096799850463867 5.450439929962158,21.358299255371094 10.192000389099121,26.9335994720459 C13.157299995422363,30.424699783325195 17.036800384521484,32.42359924316406 20.499399185180664,32.603599548339844 C20.53730010986328,32.603599548339844 20.57990074157715,32.603599548339844 20.617799758911133,32.603599548339844 C20.74570083618164,32.608299255371094 20.873600006103516,32.61309814453125 21.00149917602539,32.61309814453125 C21.1294002532959,32.61309814453125 21.257299423217773,32.608299255371094 21.38520050048828,32.603599548339844 C21.423099517822266,32.603599548339844 21.465700149536133,32.603599548339844 21.503599166870117,32.603599548339844 C24.96619987487793,32.42359924316406 28.845699310302734,30.424699783325195 31.81100082397461,26.9335994720459 C36.54779815673828,21.358299255371094 37.16830062866211,14.096799850463867 33.18939971923828,10.714699745178223 C33.18939971923828,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 C33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223z"></path></g></g><g transform="matrix(1.4199999570846558,0,0,1.4199999570846558,-8.819999694824219,-8.819999694824219)" opacity="8.29913915367797e-14" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,63,63)" fill-opacity="1" d=" M33.19409942626953,10.714699745178223 C30.13409996032715,8.114119529724121 25.25040054321289,8.568860054016113 21.006200790405273,11.444100379943848 C16.757299423217773,8.564120292663574 11.873600006103516,8.114119529724121 8.813590049743652,10.714699745178223 C4.834650039672852,14.096799850463867 5.450439929962158,21.358299255371094 10.192000389099121,26.9335994720459 C13.157299995422363,30.424699783325195 17.036800384521484,32.42359924316406 20.499399185180664,32.603599548339844 C20.53730010986328,32.603599548339844 20.57990074157715,32.603599548339844 20.617799758911133,32.603599548339844 C20.74570083618164,32.608299255371094 20.873600006103516,32.61309814453125 21.00149917602539,32.61309814453125 C21.1294002532959,32.61309814453125 21.257299423217773,32.608299255371094 21.38520050048828,32.603599548339844 C21.423099517822266,32.603599548339844 21.465700149536133,32.603599548339844 21.503599166870117,32.603599548339844 C24.96619987487793,32.42359924316406 28.845699310302734,30.424699783325195 31.81100082397461,26.9335994720459 C36.54779815673828,21.358299255371094 37.16830062866211,14.096799850463867 33.18939971923828,10.714699745178223 C33.18939971923828,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 C33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223z"></path></g></g><g transform="matrix(1.4199999570846558,0,0,1.4199999570846558,-8.819999694824219,-8.819999694824219)" opacity="8.398615136684384e-14" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,63,63)" fill-opacity="1" d=" M33.19409942626953,10.714699745178223 C30.13409996032715,8.114119529724121 25.25040054321289,8.568860054016113 21.006200790405273,11.444100379943848 C16.757299423217773,8.564120292663574 11.873600006103516,8.114119529724121 8.813590049743652,10.714699745178223 C4.834650039672852,14.096799850463867 5.450439929962158,21.358299255371094 10.192000389099121,26.9335994720459 C13.157299995422363,30.424699783325195 17.036800384521484,32.42359924316406 20.499399185180664,32.603599548339844 C20.53730010986328,32.603599548339844 20.57990074157715,32.603599548339844 20.617799758911133,32.603599548339844 C20.74570083618164,32.608299255371094 20.873600006103516,32.61309814453125 21.00149917602539,32.61309814453125 C21.1294002532959,32.61309814453125 21.257299423217773,32.608299255371094 21.38520050048828,32.603599548339844 C21.423099517822266,32.603599548339844 21.465700149536133,32.603599548339844 21.503599166870117,32.603599548339844 C24.96619987487793,32.42359924316406 28.845699310302734,30.424699783325195 31.81100082397461,26.9335994720459 C36.54779815673828,21.358299255371094 37.16830062866211,14.096799850463867 33.18939971923828,10.714699745178223 C33.18939971923828,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 C33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223z"></path></g></g><g transform="matrix(1.418629765510559,0,0,1.418629765510559,-8.79122543334961,-8.79122543334961)" opacity="0.0032622950820523043" style="display: none;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,63,63)" fill-opacity="1" d=" M33.19409942626953,10.714699745178223 C30.13409996032715,8.114119529724121 25.25040054321289,8.568860054016113 21.006200790405273,11.444100379943848 C16.757299423217773,8.564120292663574 11.873600006103516,8.114119529724121 8.813590049743652,10.714699745178223 C4.834650039672852,14.096799850463867 5.450439929962158,21.358299255371094 10.192000389099121,26.9335994720459 C13.157299995422363,30.424699783325195 17.036800384521484,32.42359924316406 20.499399185180664,32.603599548339844 C20.53730010986328,32.603599548339844 20.57990074157715,32.603599548339844 20.617799758911133,32.603599548339844 C20.74570083618164,32.608299255371094 20.873600006103516,32.61309814453125 21.00149917602539,32.61309814453125 C21.1294002532959,32.61309814453125 21.257299423217773,32.608299255371094 21.38520050048828,32.603599548339844 C21.423099517822266,32.603599548339844 21.465700149536133,32.603599548339844 21.503599166870117,32.603599548339844 C24.96619987487793,32.42359924316406 28.845699310302734,30.424699783325195 31.81100082397461,26.9335994720459 C36.54779815673828,21.358299255371094 37.16830062866211,14.096799850463867 33.18939971923828,10.714699745178223 C33.18939971923828,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 C33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223z"></path></g></g><g transform="matrix(1,0,0,1,0,0)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,63,63)" fill-opacity="1" d=" M33.19409942626953,10.714699745178223 C30.13409996032715,8.114119529724121 25.25040054321289,8.568860054016113 21.006200790405273,11.444100379943848 C16.757299423217773,8.564120292663574 11.873600006103516,8.114119529724121 8.813590049743652,10.714699745178223 C4.834650039672852,14.096799850463867 5.450439929962158,21.358299255371094 10.192000389099121,26.9335994720459 C13.157299995422363,30.424699783325195 17.036800384521484,32.42359924316406 20.499399185180664,32.603599548339844 C20.53730010986328,32.603599548339844 20.57990074157715,32.603599548339844 20.617799758911133,32.603599548339844 C20.74570083618164,32.608299255371094 20.873600006103516,32.61309814453125 21.00149917602539,32.61309814453125 C21.1294002532959,32.61309814453125 21.257299423217773,32.608299255371094 21.38520050048828,32.603599548339844 C21.423099517822266,32.603599548339844 21.465700149536133,32.603599548339844 21.503599166870117,32.603599548339844 C24.96619987487793,32.42359924316406 28.845699310302734,30.424699783325195 31.81100082397461,26.9335994720459 C36.54779815673828,21.358299255371094 37.16830062866211,14.096799850463867 33.18939971923828,10.714699745178223 C33.18939971923828,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 C33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223 33.19409942626953,10.714699745178223z"></path></g><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M15.40149974822998,27.415599822998047 C15.619199752807617,26.947900772094727 15.587400436401367,25.921600341796875 15.560199737548828,24.912599563598633 C15.560199737548828,24.45359992980957 15.161100387573242,24.22410011291504 15.152000427246094,24.535900115966797 C15.17020034790039,25.50160026550293 15.129300117492676,26.25510025024414 14.984199523925781,26.895999908447266 C14.929800033569336,27.06049919128418 15.3016996383667,27.619199752807617 15.396900177001953,27.415599822998047 C15.396900177001953,27.415599822998047 15.40149974822998,27.415599822998047 15.40149974822998,27.415599822998047 C15.40149974822998,27.415599822998047 15.40149974822998,27.415599822998047 15.40149974822998,27.415599822998047z M13.106300354003906,14.246700286865234 C13.673299789428711,14.714400291442871 14.4443998336792,14.770700454711914 15.133899688720703,14.415599822998047 C15.274499893188477,14.337699890136719 15.360699653625488,14.186100006103516 15.333399772644043,13.995599746704102 C15.310799598693848,13.839699745178223 15.179200172424316,13.683799743652344 15.024999618530273,13.761699676513672 C14.485199928283691,14.077899932861328 13.755000114440918,13.99120044708252 13.319499969482422,13.618800163269043 C13.246999740600586,13.54520034790039 13.079099655151367,13.610199928283691 12.993000030517578,13.761699676513672 C12.893199920654297,13.939299583435059 12.929400444030762,14.090800285339355 13.101799964904785,14.246700286865234 C13.101799964904785,14.246700286865234 13.106300354003906,14.246700286865234 13.106300354003906,14.246700286865234 C13.106300354003906,14.246700286865234 13.106300354003906,14.246700286865234 13.106300354003906,14.246700286865234z M9.382430076599121,13.462900161743164 C9.813329696655273,12.800399780273438 10.207900047302246,12.453900337219238 10.829400062561035,12.064200401306152 C13.106300354003906,10.691399574279785 16.381200790405273,10.756400108337402 18.962099075317383,12.280699729919434 C19.660600662231445,12.722399711608887 19.959999084472656,13.129500389099121 20.06879997253418,13.96090030670166 C20.182199478149414,14.8572998046875 20.17770004272461,16.38170051574707 19.959999084472656,17.41230010986328 C19.787599563598633,18.22209930419922 19.515499114990234,18.49489974975586 18.73080062866211,18.425600051879883 C15.800600051879883,18.053199768066406 12.06760025024414,17.48590087890625 9.545720100402832,17.239099502563477 C8.883489608764648,17.148099899291992 8.624939918518066,16.87969970703125 8.575050354003906,16.20840072631836 C8.511549949645996,15.35099983215332 8.933380126953125,14.16450023651123 9.38696002960205,13.467300415039062 C9.38696002960205,13.467300415039062 9.382430076599121,13.462900161743164 9.382430076599121,13.462900161743164 C9.382430076599121,13.462900161743164 9.382430076599121,13.462900161743164 9.382430076599121,13.462900161743164z M11.972399711608887,21.136499404907227 C11.95419979095459,21.03260040283203 11.931599617004395,20.928600311279297 11.918000221252441,20.84630012512207 C11.042499542236328,20.655799865722656 10.212499618530273,20.473899841308594 9.482219696044922,20.30500030517578 C8.761019706726074,20.140499114990234 8.212180137634277,19.73780059814453 8.094249725341797,18.97130012512207 C7.994460105895996,18.339000701904297 8.425370216369629,17.74139976501465 9.128419876098633,17.776100158691406 C11.781900405883789,17.897300720214844 15.991100311279297,18.52519989013672 19.220600128173828,19.170499801635742 C20.06879997253418,19.339399337768555 20.585899353027344,20.153499603271484 20.590499877929688,20.945899963378906 C20.590499877929688,21.90730094909668 20.086999893188477,22.279699325561523 19.261499404907227,22.15850067138672 C18.440500259399414,22.037200927734375 17.546899795532227,21.91160011291504 16.639799118041992,21.760099411010742 C16.648799896240234,21.85099983215332 16.657899856567383,21.963600158691406 16.66699981689453,22.0718994140625 C16.689699172973633,22.318700790405273 16.707799911499023,22.517900466918945 16.712299346923828,22.717100143432617 C18.871400833129883,23.561500549316406 20.064300537109375,24.864999771118164 20.141399383544922,27.06049919128418 C20.24570083618164,29.93160057067871 18.816999435424805,30.615800857543945 16.363100051879883,29.476900100708008 C13.900099754333496,28.33370018005371 11.822699546813965,26.385000228881836 10.466500282287598,24.102800369262695 C9.445929527282715,22.39229965209961 10.207900047302246,21.747100830078125 12.117500305175781,21.764400482177734 C12.06309986114502,21.57390022277832 12.0177001953125,21.365999221801758 11.972399711608887,21.136499404907227 C11.972399711608887,21.136499404907227 11.972399711608887,21.136499404907227 11.972399711608887,21.136499404907227z"></path></g><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M24.22369956970215,17.390600204467773 C23.24850082397461,17.507600784301758 22.65880012512207,17.390600204467773 22.63610076904297,16.468299865722656 C22.60890007019043,15.437600135803223 23.30739974975586,15.086799621582031 24.53660011291504,14.844300270080566 C26.237600326538086,14.506600379943848 28.324100494384766,14.160099983215332 29.82539939880371,13.59280014038086 C30.056699752807617,13.523500442504883 29.843599319458008,13.034199714660645 29.630399703979492,13.116499900817871 C27.716299057006836,13.644800186157227 25.84749984741211,13.913299560546875 24.101200103759766,14.303000450134277 C22.944599151611328,14.558500289916992 21.874099731445312,14.788000106811523 21.837799072265625,13.675100326538086 C21.787900924682617,12.246100425720215 24.010499954223633,11.033499717712402 26.4960994720459,10.803999900817871 C28.67329978942871,10.6048002243042 30.31529998779297,11.250100135803223 31.58989906311035,12.601200103759766 C32.61949920654297,13.692399978637695 33.08209991455078,15.117199897766113 32.84170150756836,16.11319923400879 C32.61040115356445,17.078800201416016 31.830299377441406,17.351699829101562 30.64189910888672,17.43829917907715 C29.453500747680664,17.524900436401367 28.57349967956543,17.468599319458008 28.419300079345703,16.360000610351562 C27.39419937133789,16.827699661254883 25.22610092163086,17.269399642944336 24.22369956970215,17.38629913330078 C24.22369956970215,17.38629913330078 24.22369956970215,17.390600204467773 24.22369956970215,17.390600204467773 C24.22369956970215,17.390600204467773 24.22369956970215,17.390600204467773 24.22369956970215,17.390600204467773z M23.0851993560791,25.79170036315918 C22.150800704956055,26.06450080871582 21.824199676513672,25.375999450683594 21.846900939941406,24.388599395751953 C21.864999771118164,23.46190071105957 22.273300170898438,22.691099166870117 23.021699905395508,22.59149932861328 C25.843000411987305,22.219100952148438 29.512399673461914,21.43090057373047 32.10240173339844,20.781400680541992 C32.78730010986328,20.608200073242188 32.99140167236328,21.01959991455078 32.72829818725586,21.708099365234375 C32.506099700927734,22.292699813842773 31.984500885009766,22.877300262451172 31.562599182128906,23.028900146484375 C30.274499893188477,23.487899780273438 28.70050048828125,24.509899139404297 27.534799575805664,25.830699920654297 C27.32159996032715,26.073200225830078 27.27630043029785,26.462900161743164 27.534799575805664,26.185800552368164 C28.51460075378418,25.172500610351562 29.684799194335938,24.18079948425293 30.646400451660156,23.808399200439453 C31.56719970703125,23.45330047607422 31.784900665283203,23.92099952697754 31.077299118041992,24.925600051879883 C30.33340072631836,25.9778995513916 29.517000198364258,26.727100372314453 28.60070037841797,27.415599822998047 C26.627700805664062,28.900999069213867 24.454999923706055,29.801700592041016 22.663299560546875,29.90999984741211 C21.982999801635742,29.94890022277832 21.588300704956055,29.654499053955078 21.62459945678711,28.58919906616211 C21.66550064086914,27.35930061340332 22.309499740600586,26.5669002532959 23.171300888061523,26.27239990234375 C23.94700050354004,26.0039005279541 24.69540023803711,25.661800384521484 25.588899612426758,24.99920082092285 C25.78849983215332,24.843299865722656 25.784000396728516,24.332300186157227 25.57990074157715,24.509899139404297 C24.749799728393555,25.116199493408203 23.8789005279541,25.566499710083008 23.0851993560791,25.79599952697754 C23.0851993560791,25.79599952697754 23.0851993560791,25.79170036315918 23.0851993560791,25.79170036315918 C23.0851993560791,25.79170036315918 23.0851993560791,25.79170036315918 23.0851993560791,25.79170036315918z M22.754100799560547,19.114200592041016 C25.883800506591797,18.516599655151367 30.09760093688965,17.840999603271484 32.850799560546875,17.72410011291504 C33.571998596191406,17.69379997253418 33.9984016418457,18.291400909423828 33.90769958496094,18.906299591064453 C33.79880142211914,19.655500411987305 33.25,20.036500930786133 32.506099700927734,20.201099395751953 C29.711999893188477,20.81599998474121 25.702299118041992,21.686399459838867 22.704200744628906,22.037200927734375 C21.905899047851562,22.13249969482422 21.39780044555664,21.80340003967285 21.40239906311035,20.86370086669922 C21.40239906311035,20.09280014038086 21.923999786376953,19.270099639892578 22.754100799560547,19.114200592041016 C22.754100799560547,19.114200592041016 22.754100799560547,19.114200592041016 22.754100799560547,19.114200592041016z"></path></g></g></g></svg></div>
                                        </a>
                                    </li>
                                    <li class="navi navi-community ">
                                        <a>
                                            <img src="/assets/app/images/common/ico_community.png" alt="Ïª§ÎÆ§ÎãàÌã∞">
                                            <span>Ïª§ÎÆ§ÎãàÌã∞</span>
                                        </a>
                                    </li>
                                    <li class="navi navi-mypage ">
                                        <a>
                                            <img src="/assets/app/images/common/ico_mypage.png" alt="ÎßàÏù¥">
                                            <span>ÎßàÏù¥</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="inputFormBox w-75">
                        <div class="p-3">
                            <h5>Í≥µÎèô ÏàòÏöîÎ•º Í≥µÎûµÌïòÎäî Îß§Î†•Ï†ÅÏù∏ Ìï†Ïù∏Í≥º ÌäπÏ†ÑÏùÑ Ï†úÏïàÌï¥ Î≥¥ÏÑ∏Ïöî!</h5>
                            <p class="text-sm mb-0">* ÎÇ¥Ïö© ÏûÖÎ†• Ïãú Ìï¥Îãπ ÎÇ¥Ïö©Ïù¥ Ï¢åÏ∏° ÎØ∏Î¶¨ Î≥¥Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.</p>
                        </div>

                        <div class="card p-5 overflow-hidden mb-4" style="box-shadow: none; border-radius: 40px;">
                            <div class="form-group">
                                <label class="mx-0 fs-6">
                                    <img src="/assets/manage/images/ico_mng_moongcledeal_01.png" alt="Î≠âÌÅ¥Îîú"> &nbsp;Î≠âÌÅ¥Îîú
                                </label>
                            </div>

                            <hr class="horizontal dark my-3">

                            <div class="form-group my-3">
                                <div class="d-flex align-items-center justify-content-between">
                                    <label class="mx-0 text-sm" >Ï†úÏïàÎ™Ö</label>
                                    <button type="button" class="bg-white text-sm" style="color: #cb0c9f; border: 0px;" data-bs-toggle="modal" data-bs-target="#moongcledeal_name_modal">
                                        <i class="fa-solid fa-pen"></i> &nbsp;ÏàòÏ†ï
                                    </button>
                                </div>
                                <div class="reflectionsWrap mt-3 text-sm px-1" id="moongcledeal_name_view" style="display: none;"></div>
                            </div>
                        </div>

                        <div class="card p-5 overflow-hidden mb-4" style="box-shadow: none; border-radius: 40px;">
                            <div class="form-group">
                                <label class="mx-0 fs-6">
                                    <img src="/assets/manage/images/ico_mng_moongcledeal_02.png" alt="ÎÇ†Ïßú"> &nbsp;ÎÇ†Ïßú
                                </label>
                            </div>

                            <hr class="horizontal dark my-3">

                            <div class="form-group my-3">
                                <div class="d-flex align-items-center justify-content-between">
                                    <label class="mx-0 text-sm" >ÌåêÎß§ Í∏∞Í∞Ñ</label>
                                    <button type="button" class="bg-white text-sm" style="color: #cb0c9f; border: 0px;" data-bs-toggle="modal" data-bs-target="#moongcledeal_period_modal">
                                        <i class="fa-solid fa-pen"></i> &nbsp;ÏàòÏ†ï
                                    </button>
                                </div>  
                                <div class="reflectionsWrap mt-3 text-sm px-1" id="moongcledeal_period" style="display: none;"></div>
                            </div>
                            
                            <div class="form-group my-3">
                                <div class="d-flex align-items-center justify-content-between">
                                    <label class="mx-0 text-sm" >Ìà¨Ïàô Í∞ÄÎä•Ïùº</label>
                                    <button type="button" class="bg-white text-sm" style="color: #cb0c9f; border: 0px;" data-bs-toggle="modal" data-bs-target="#moongcledeal_possible_modal">
                                        <i class="fa-solid fa-pen"></i> &nbsp;ÏàòÏ†ï
                                    </button>
                                </div>
                                <div class="reflectionsWrap mt-3 text-sm px-1" style="display: none;" id="moongcledeal_possible_view"></div>
                                <div class="reflectionsWrap possibleReflectionsWrap mt-3 text-sm px-1" style="display: none;">
                                    <span class="text-sm d-inline-block fw-bold me-2">Ìà¨Ïàô Í∏∞Í∞Ñ</span>
                                    <span class="text-sm d-inline-block" id="moongcledeal_possible"></span>    
                                </div>
                                <div class="reflectionsWrap possibleReflectionsWrap mt-1 text-sm px-1" style="display: none;">
                                    <span class="text-sm d-inline-block fw-bold me-2">Ï†úÏô∏ ÎÇ†Ïßú</span>     
                                    <span class="text-sm d-inline-block" id="mooongcledeal_blackout">ÏóÜÏùå</span>
                                </div>
                            </div>
                        </div>


                        <div class="card p-5 overflow-hidden mb-4" style="box-shadow: none; border-radius: 40px;">
                            <div class="form-group">
                                <label class="mx-0 fs-6">
                                    <img src="/assets/manage/images/ico_mng_moongcledeal_03.png" alt="Îã®ÎèÖ Ï†úÏïà"> &nbsp;Îã®ÎèÖ Ï†úÏïà
                                </label>
                            </div>

                            <hr class="horizontal dark my-3">

                            <div class="form-group my-3"> 
                                <div class="d-flex align-items-center justify-content-between">
                                    <label class="mx-0 text-sm" ><b class="text-danger">*</b> Ìè¨Ìï® ÌòúÌÉù</label>
                                    <button type="button" class="bg-white text-sm" style="color: #cb0c9f; border: 0px;" data-bs-toggle="modal" data-bs-target="#moongcledeal_benefit_modal">
                                        <i class="fa-solid fa-pen"></i> &nbsp;ÏàòÏ†ï
                                    </button>
                                </div>
                                <div class="reflectionsWrap mt-3 text-sm px-1">
                                    <div id="moongcledeal_discount_view">
                                        5% Ìï†Ïù∏
                                    </div>
                                    <div id="moongcledeal_benefit_view"></div>
                                </div>
                            </div>

                            <div class="form-group my-3"> 
                                <div class="d-flex align-items-center justify-content-between">
                                    <label class="mx-0 text-sm" >Í∏∞Î∞ò ÏöîÍ∏àÏ†ú</label>
                                    <button type="button" class="bg-white text-sm" style="color: #cb0c9f; border: 0px;" data-bs-toggle="modal" data-bs-target="#moongcledeal_rateplan_modal">
                                        <i class="fa-solid fa-pen"></i> &nbsp;ÏàòÏ†ï
                                    </button>
                                </div>
                                <div class="reflectionsWrap mt-3 text-sm px-1" id="moongcledeal_rateplan" style="display: none;"></div>
                            </div>                        
                            
                            <div class="form-group my-3"> 
                                <div class="d-flex align-items-center justify-content-between">
                                    <label class="mx-0 text-sm" >Ï†ÅÏö© Í∞ùÏã§</label>
                                    <button type="button" class="bg-white text-sm" style="color: #cb0c9f; border: 0px;" data-bs-toggle="modal" data-bs-target="#moongcledeal_room_modal">
                                        <i class="fa-solid fa-pen"></i> &nbsp;ÏàòÏ†ï
                                    </button>
                                </div> 
                                <div class="reflectionsWrap mt-3 text-sm px-1" id="moongcledeal_room" style="display: none;"></div>  
                            </div>
                            
                            <div class="form-group my-3"> 
                                <div class="d-flex align-items-center justify-content-between">
                                    <div>
                                        <label class="mx-0 text-sm" ><b class="text-danger">*</b> ÏàòÏöî Í≥µÎûµ ÌÉúÍ∑∏</label>
                                        <button 
                                            type="button" 
                                            style="background: none; border: 0px;" 
                                            data-bs-toggle="tooltip" 
                                            data-bs-placement="bottom" 
                                            title="Îã§ÏñëÌïòÍ≥† Ï†ïÌôïÌïú ÏàòÏöî Í≥µÎûµ ÌÉúÍ∑∏Î•º ÏÑ†ÌÉùÌïòÎ©¥ ÎßéÏùÄ Í≥†Í∞ùÏóêÍ≤å Îß§Ïπ≠Îê©ÎãàÎã§. Ïó∞Í¥ÄÎêòÏßÄ ÏïäÏùÄ ÌÉúÍ∑∏Î•º Î¨¥Î∂ÑÎ≥ÑÌïòÍ≤å ÏÑ†ÌÉù ÏãúÏóêÎäî Ìö®Í≥ºÍ∞Ä Îñ®Ïñ¥Ïßà Ïàò ÏûàÏñ¥Ïöî.">
                                            <i class="fa-solid fa-circle-info" style="color: #c7c7c7;"></i>                
                                        </button>
                                    </div>
                                
                                    <button type="button" class="bg-white text-sm" style="color: #cb0c9f; border: 0px;" data-bs-toggle="modal" data-bs-target="#moongcledeal_tag_modal">
                                        <i class="fa-solid fa-pen"></i> &nbsp;ÏàòÏ†ï
                                    </button>
                                </div>
                                <div class="reflectionsWrap mt-3 text-sm px-1" id="moongcledeal_tag_view" style="display: none;"></div>    
                            </div>
                        </div>

                        <div class="card p-5 overflow-hidden" style="box-shadow: none; border-radius: 40px;">
                            <div class="form-group">
                                <label class="mx-0 fs-6">
                                    <img src="/assets/manage/images/ico_mng_moongcledeal_04.png" alt="ÏïåÎ¶º"> &nbsp; ÏïåÎ¶º
                                </label>
                            </div>

                            <hr class="horizontal dark my-3">
                            
                            <div class="form-group my-3"> 
                                <div class="d-flex align-items-center justify-content-between">
                                    <label class="mx-0 text-sm" >Î∞úÏÜ° ÎåÄÏÉÅ</label>
                                    <button type="button" class="bg-white text-sm" style="color: #cb0c9f; border: 0px;" data-bs-toggle="modal" data-bs-target="#moongcledeal_target_modal">
                                        <i class="fa-solid fa-pen"></i> &nbsp;ÏàòÏ†ï
                                    </button>            
                                </div>
                                <div class="reflectionsWrap mt-3 text-sm px-1" id="moongcledeal_target" style="display: none;"></div>   
                            </div>
                            
                            <div class="form-group my-3"> 
                                <div class="d-flex align-items-center justify-content-between">
                                    <label class="mx-0 text-sm" >Î¨¥Î£å Ìë∏Ïãú Î©îÏãúÏßÄ</label>
                                    <button type="button" class="bg-white text-sm" style="color: #cb0c9f; border: 0px;" data-bs-toggle="modal" data-bs-target="#moongcledeal_text_modal">
                                        <i class="fa-solid fa-pen"></i> &nbsp;ÏàòÏ†ï
                                    </button>      
                                </div>
                                <div class="reflectionsWrap notiReflectionsWrap mt-3 text-sm px-1"></div>      
                                <div class="text-sm d-block fw-bold" id="moongcledeal_customTitle_view"></div>    
                                <div class="text-sm" id="moongcledeal_customMessage_view" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; white-space: pre-wrap;"></div>   
                            </div>
                        </div>

                        <div class="d-flex justify-content-center mt-4">
                            <button type="button" id="cancelForm" name="cancelForm" class="btn btn-light m-0" onclick="location.href='/partner/moongcleoffers'">Ï∑®ÏÜå</button>
                            <button id="submitForm" class="btn bg-gradient-primary ms-2 mb-0 text-white" type="button" title="Save">ÏÉùÏÑ±ÌïòÍ∏∞</button>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="footer py-5">
                <div class="container-fluid">
                    <div class="row align-items-center justify-content-lg-between">
                        <div class="col-lg-6 mb-lg-0 mb-4">
                            <div class="copyright text-center text-sm text-muted text-lg-start">
                                ¬© 2025,
                                <a href="https://www.moongcletrip.com" class="font-weight-bold" target="_blank">Honolulu Company</a>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <ul class="nav nav-footer justify-content-center justify-content-lg-end">
                                <li class="nav-item">
                                    <a href="https://www.moongcletrip.com" class="nav-link text-muted" target="_blank">Î≠âÌÅ¥Ìä∏Î¶Ω</a>
                                </li>
                                <li class="nav-item">
                                    <a href="https://www.honolulu.co.kr/channels/L2NoYW5uZWxzLzE5NQ/pages/home" class="nav-link text-muted" target="_blank">Ìò∏ÎÜÄÎ£∞Î£®Ïª¥ÌçºÎãà</a>
                                </li>
                                <li class="nav-item">
                                    <a href="https://www.instagram.com/moongcletrip/" class="nav-link text-muted" target="_blank">instagram</a>
                                </li>
                                <li class="nav-item">
                                    <a href="https://www.moongcletrip.com" class="nav-link pe-0 text-muted" target="_blank">License</a>
                                </li> 
                            </ul>
                        </div>
                    </div>
                </div>
            </footer>

        </div>

        <!-- Î≠âÌÅ¥Îîú Ï†úÏïàÎ™Ö -->
        <div class="modal fade" id="moongcledeal_name_modal" tabindex="-1" role="dialog" aria-labelledby="moongcledeal_name_modal">
            <div class="modal-dialog modal-dialog-centered modal-m" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title fs-6" id="exampleModalLabel">Î≠âÌÅ¥Îîú Ï†úÏïàÎ™Ö</h5>
                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                            <span>√ó</span>
                        </button>
                    </div>
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-body">
                                <div class="form-group mb-0">
                                    <input type="text" id="moongcledeal_name" data-target="#moongcledeal_name_view" class="form-control" placeholder="Í≥†Í∞ùÎãòÍªò ÎÖ∏Ï∂úÎêòÎäî Îß§Î†•Ï†ÅÏù∏ Î≠âÌÅ¥ÎîúÎ™ÖÏùÑ ÏÑ§Ï†ïÌï¥ Î≥¥ÏÑ∏Ïöî" maxlength="100">
                                    <span class="d-block text-xs mt-2 px-1">ÏòàÏãú) [Îã®ÎèÖ] 30% Ìï†Ïù∏+2Ïù∏ ÏÇºÎã§Ï†ï Ï°∞ÏãùÎ∑îÌéò Î¨¥Î£å Ï†úÏïà+Î†àÏù¥Ìä∏Ï≤¥ÌÅ¨ÏïÑÏõÉ 2ÏãúÍ∞Ñ Î¨¥Î£å</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-link mr-auto mb-0" data-bs-dismiss="modal">Îã´Í∏∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!--ÌåêÎß§ Í∏∞Í∞Ñ -->
        <div class="modal fade" id="moongcledeal_period_modal" tabindex="-1" role="dialog" aria-labelledby="moongcledeal_period_modal">
            <div class="modal-dialog modal-dialog-centered modal-m" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title fs-6" id="exampleModalLabel">ÌåêÎß§ Í∏∞Í∞Ñ</h5>
                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                            <span>√ó</span>
                        </button>
                    </div>
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-body">
                                <div class="form-check">
                                    <input type="radio" id="allTime" class="form-check-input" name="period" data-target="#moongcledeal_period" data-name="ÏÉÅÏãú" checked>
                                    <label for="allTime" class="custom-control-label">
                                        ÏÉÅÏãú
                                    </label>
                                </div>
                                <div class="d-flex align-items-center gap-20px">
                                    <div class="form-check w-20">
                                        <input type="radio" id="selectDate" class="form-check-input" name="period" data-target="#moongcledeal_period">
                                        <label for="selectDate" class="custom-control-label">
                                            ÎÇ†Ïßú ÏÑ†ÌÉù
                                        </label>
                                    </div>
                                    <div class="dateSelectBox periodDateSelectBox form-group mb-0 w-100" style="display: none;">
                                        <input
                                            id="period-date"
                                            type="text"
                                            data-target="#moongcledeal_period" 
                                            name="period-date"
                                            class="datepicker custom form-control border-0 ms-2"
                                            data-class="period-date"
                                            placeholder="ÌÉ≠ÌïòÏó¨ ÎÇ†Ïßú ÏÑ†ÌÉù"
                                            style="color: #cb0c9f;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-link mr-auto mb-0" data-bs-dismiss="modal">Îã´Í∏∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ìà¨Ïàô Í∞ÄÎä•Ïùº -->
        <div class="modal fade" id="moongcledeal_possible_modal" tabindex="-1" role="dialog" aria-labelledby="moongcledeal_possible_modal">
            <div class="modal-dialog modal-dialog-centered modal-m" role="document" style="max-width: 60rem;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title fs-6" id="exampleModalLabel">Ìà¨Ïàô Í∞ÄÎä•Ïùº</h5>
                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                            <span>√ó</span>
                        </button>
                    </div>
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-body">
                                <div class="form-check">
                                    <input type="radio" id="possibleAllTime" class="form-check-input" name="possible" data-target="#moongcledeal_possible_view" data-name="ÏÉÅÏãú" checked>
                                    <label for="possibleAllTime" class="custom-control-label">
                                        ÏÉÅÏãú
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="possibleSelectDate" class="form-check-input" name="possible">
                                    <label for="possibleSelectDate" class="custom-control-label">ÎÇ†Ïßú ÏÑ†ÌÉù</label>
                                    <div class="reflectionsWrap ms-2 text-sm" id="moongcledeal_possible_modal_view" style="color: #cb0c9f; display: none;"></div>
                                </div>
                                <div class="possibleSelectBox mt-4" style="display: none;">
                                    <div class="calendarBox w-100">
                                        <div>
                                            <div class="dateSelectBox possibleDateSelectBox form-group mb-0">                                            
                                                <input 
                                                    id="possible-date"
                                                    type="text"
                                                    data-target="#moongcledeal_possible, #moongcledeal_possible_modal_view"
                                                    name="possible-date"
                                                    class="datepicker custom form-control border-0 ms-2"
                                                    data-class="possible-date"
                                                    style="display: none;">
                                            </div>
                                        </div>
                                    </div>

                                    <hr class="horizontal dark my-3">

                                    <div class="d-flex flex-wrap">
                                        <div class="form-check">
                                            <input type="checkbox" id="blackout" class="form-check-input" disabled>
                                            <label for="blackout" class="custom-control-label">Ï†úÏô∏ ÎÇ†Ïßú ÏßÄÏ†ï</label>
                                            <div class="reflectionsWrap d-inline-block ms-2 text-sm" id="moongcledeal_blackout_modal_view" style="color: #cb0c9f;"></div>
                                        </div>
                                        <div class="calendarBox w-100 blackoutCalendar mt-4" style="display: none;">
                                            <div>
                                                <div class="dateSelectBox possibleDateSelectBox form-group mb-0">                                            
                                                    <input 
                                                        id="blackout-date"
                                                        type="text"
                                                        data-target="#mooongcledeal_blackout, #moongcledeal_blackout_modal_view"
                                                        name="blackout-date"
                                                        class="datepicker custom form-control border-0 ms-2"
                                                        data-class="blackout-date"
                                                        style="display: none;">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-link mr-auto mb-0" data-bs-dismiss="modal">Îã´Í∏∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ìè¨Ìï® ÌòúÌÉù -->
        <div class="modal fade" id="moongcledeal_benefit_modal" tabindex="-1" role="dialog" aria-labelledby="moongcledeal_benefit_modal">
            <div class="modal-dialog modal-dialog-centered modal-m" role="document" style="max-width: 55%;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title fs-6" id="exampleModalLabel">Ìè¨Ìï® ÌòúÌÉù</h5>
                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                            <span>√ó</span>
                        </button>
                    </div>
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-body">
                                <div class="d-flex flex-wrap">
                                    <div class="w-100">
                                        <i class="fa-solid fa-percent"></i>
                                        <label for="benefitInput" class="custom-control-label">Ìï†Ïù∏Ïú®</label>
                                    </div>
                                    <div class="w-100 form-group mb-0">
                                        <input      
                                            id="discount"
                                            type="number"
                                            data-target="#discountView, #discountViewMini"
                                            name="discount"
                                            class="form-control my-3 mx-2 w-10"
                                            placeholder="0"
                                            value="5"
                                            min="5"
                                            max="100"
                                            onkeydown="blockNegative(event);"
                                            style="display: inline-block; border: 1px solid #dee2e6;">
                                            <span class="d-inline-block text-sm">% Ìï†Ïù∏</span>
                                            <p class="mb-4 text-sm">( ÏöîÍ∏à Í¥ÄÎ¶¨ > ÏÉÅÏãú Ìï†Ïù∏Í≥º Ï§ëÎ≥µ Ìï†Ïù∏ÎêòÏßÄ ÏïäÏäµÎãàÎã§. ÏÉÅÏãú Ìï†Ïù∏Ïù¥ ÏÑ§Ï†ïÎêòÏñ¥ ÏûàÎçîÎùºÎèÑ Ìï†Ïù∏ Ï†Ñ 'ÏùºÎ∞ò ÏöîÍ∏à' Í∏∞Ï§ÄÏóê Ï†ÅÏö©Îê©ÎãàÎã§. )</p>
                                    </div>
                                </div>

                                <div class="d-flex flex-wrap">
                                    <div class="w-100">
                                        <i class="fa-regular fa-keyboard"></i>
                                        <label for="benefitInput" class="custom-control-label">ÌäπÏ†Ñ Ï†úÏïà (ÏßÅÏ†ë ÏûÖÎ†•)</label>
                                    </div>
                                    <div class="d-flex w-100 form-group my-3 align-items-center justify-content-between" style=" border: 1px solid #dee2e6; border-radius: 0.5rem;">
                                        <input      
                                            id="benefitEnter"
                                            type="text"
                                            data-target="#benefitPreview"
                                            name="benefitEnter"
                                            class="form-control my-0"
                                            placeholder="Ï†úÏïàÌïòÎ†§Îäî ÌòúÌÉùÏùÑ ÏßÅÏ†ë ÏûÖÎ†•Ìï¥ Î≥¥ÏÑ∏Ïöî"
                                            style="display: inline-block; width: 90%; border: 0px;">

                                            <button 
                                                class="h-100 px-4" 
                                                type="button" 
                                                id="benefitEnterBtn"
                                                style="background: none; border: 0px; color: #cb0ca0; border-left: 1px solid #dee2e6;">
                                                <i class="fa-solid fa-plus"></i>
                                            </button>
                                    </div>
                                    
                                     <div class="benefitPreviewWrap mb-4 gap-2 flex-wrap" style="display: flex;">
                                        <!-- ÌäπÏ†Ñ Ï†úÏïà (ÏßÅÏ†ë ÏûÖÎ†•) ÎØ∏Î¶¨Î≥¥Í∏∞ -->
                                     </div>
                                </div>

                                <div class="d-flex flex-wrap">
                                    <div class="w-100">
                                        <i class="fa-solid fa-check"></i>
                                        <label for="benefitChoice" class="custom-control-label">ÌäπÏ†Ñ Ï†úÏïà (ÏÑ†ÌÉù ÏûÖÎ†•)</label>
                                    </div>
                                    <div class="w-100 mt-3 p-2 py-3" style="border: 1px solid #dee2e6; border-radius: 10px;">
                                        <!-- tab -->
                                        <div class="nav-wrapper position-relative end-0 w-50 custom">
                                            <ul class="nav nav-pills nav-fill p-1 bg-white d-inline-block w-100" role="tablist">
                                                <li class="nav-item d-inline-block">
                                                    <a class="nav-link mb-0 px-3 py-1 active" data-bs-toggle="tab" href="#roomBenefits" role="tab" aria-controls="roomBenefits" aria-selected="true">
                                                        Í∞ùÏã§ 
                                                    </a>
                                                </li>
                                                <li class="nav-item d-inline-block">
                                                    <a class="nav-link mb-0 px-3 py-1" data-bs-toggle="tab" href="#fnbBenefits" role="tab" aria-controls="fnbBenefits" aria-selected="false">
                                                        ÏãùÏùå
                                                    </a>
                                                </li>
                                                <li class="nav-item d-inline-block">
                                                    <a class="nav-link mb-0 px-3 py-1" data-bs-toggle="tab" href="#facilityBenefits" role="tab" aria-controls="facilityBenefits" aria-selected="false">
                                                        Î∂ÄÎåÄÏóÖÏû•
                                                    </a>
                                                </li>
                                                <li class="nav-item d-inline-block">
                                                    <a class="nav-link mb-0 px-3 py-1" data-bs-toggle="tab" href="#etcBenefits" role="tab" aria-controls="etcBenefits" aria-selected="false">
                                                        Í∏∞ÌÉÄ
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>

                                        <hr class="horizontal dark my-3">

                                        <!-- tab content -->
                                         <div class="tab-content tabChoice p-3" id="nav-tabContent">
                                            <!-- Í∞ùÏã§ -->
                                            <div class="tab-pane benefit fade show active" id="roomBenefits" role="tabpanel" aria-labelledby="nav-basic-tab">
                                                <ul>
                                                    <?php foreach ($data['benefits']['room'] as $room) : ?>
                                                        <li class="text-sm d-inline-block" data-target="#moongcledeal_benefit, #moongcledeal_benefit_view">
                                                            <span class="d-inline-block py-1 px-4"><?= $room-> benefit_name; ?></span>
                                                        </li>
                                                    <?php endforeach; ?>
                                                </ul>
                                            </div> 

                                            <!-- ÏãùÏùå -->
                                            <div class="tab-pane benefit fade" id="fnbBenefits" role="tabpanel" aria-labelledby="nav-basic-tab">
                                                <ul>
                                                    <?php foreach ($data['benefits']['fnb'] as $fnb) : ?>
                                                        <li class="text-sm d-inline-block" data-target="#moongcledeal_benefit, #moongcledeal_benefit_view">
                                                            <span class="d-inline-block py-1 px-4"><?= $fnb-> benefit_name; ?></span>
                                                        </li>
                                                    <?php endforeach; ?>
                                                </ul>
                                            </div> 

                                            <!-- Î∂ÄÎåÄÏóÖÏû• -->
                                            <div class="tab-pane benefit fade" id="facilityBenefits" role="tabpanel" aria-labelledby="nav-basic-tab">
                                                <ul>
                                                    <?php foreach ($data['benefits']['facility'] as $facility) : ?>
                                                        <li class="text-sm d-inline-block" data-target="#moongcledeal_benefit, #moongcledeal_benefit_view">
                                                            <span class="d-inline-block py-1 px-4"><?= $facility-> benefit_name; ?></span>
                                                        </li>
                                                    <?php endforeach; ?>
                                                </ul>
                                            </div> 

                                            <!-- Í∏∞ÌÉÄ -->
                                            <div class="tab-pane benefit fade" id="etcBenefits" role="tabpanel" aria-labelledby="nav-basic-tab">
                                                <ul>
                                                    <?php foreach ($data['benefits']['etc'] as $etc) : ?>
                                                        <li class="text-sm d-inline-block" data-target="#moongcledeal_benefit, #moongcledeal_benefit_view">
                                                            <span class="d-inline-block py-1 px-4"><?= $etc-> benefit_name; ?></span>
                                                        </li>
                                                    <?php endforeach; ?>
                                                </ul>
                                            </div> 
                                        </div>
                                    </div>    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-link mr-auto mb-0" data-bs-dismiss="modal">Îã´Í∏∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Í∏∞Î∞ò ÏöîÍ∏àÏ†ú -->
        <div class="modal fade" id="moongcledeal_rateplan_modal" tabindex="-1" role="dialog" aria-labelledby="moongcledeal_rateplan_modal">
            <div class="modal-dialog modal-dialog-centered modal-m" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title fs-6" id="exampleModalLabel">Í∏∞Î∞ò ÏöîÍ∏àÏ†ú</h5>
                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                            <span>√ó</span>
                        </button>
                    </div>
                    <div class="modal-body p-0">
                        <div class="card card-plain" style="overflow-y: auto; height: auto; max-height: 30vh;">
                            <div class="card-body">
                                <?php foreach ($data['rateplans'] as $index => $rateplan) : ?>
                                    <div class="form-check">
                                        <input 
                                            type="radio"
                                            id="<?= $rateplan->rateplan_idx; ?>"
                                            class="form-check-input"
                                            name="rateplan"
                                            data-target="#moongcledeal_rateplan"
                                            data-name="<?= $rateplan->rateplan_name; ?>"
                                            data-rooms='<?= json_encode($rateplan->rooms); ?>'
                                            <?= $index === 0 ? 'checked' : '' ;?>>
                                        <label for="<?= $rateplan->rateplan_idx; ?>" class="custom-control-label">
                                            <?= $rateplan->rateplan_name; ?>
                                        </label>
                                    </div>
                                <?php endforeach; ?>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-link mr-auto mb-0" data-bs-dismiss="modal">Îã´Í∏∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ï†ÅÏö© Í∞ùÏã§ -->
        <div class="modal fade" id="moongcledeal_room_modal" tabindex="-1" role="dialog" aria-labelledby="moongcledeal_room_modal" insert>
            <div class="modal-dialog modal-dialog-centered modal-m" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title fs-6" id="exampleModalLabel">Ï†ÅÏö© Í∞ùÏã§</h5>
                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                            <span insert>√ó</span>
                        </button>
                    </div>
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-body" id="moongcledeal_rateplan_rooms" style="overflow-y: auto; height: auto; max-height: 30vh;">
                                <!-- Í∏∞Î∞ò ÏöîÍ∏àÏ†ú Ï†ÅÏö© Í∞ùÏã§ ÎÖ∏Ï∂ú -->
                                <div class="py-5 text-center text-sm ">
                                    Ï†ÅÏö© Í∞ÄÎä•Ìïú Í∞ùÏã§Ïù¥ Ï°¥Ïû¨ÌïòÏßÄ ÏïäÏäµÎãàÎã§.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-link mr-auto mb-0" data-bs-dismiss="modal">Îã´Í∏∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÏàòÏöî Í≥µÎûµ ÌÉúÍ∑∏ -->
        <div class="modal fade" id="moongcledeal_tag_modal" tabindex="-1" role="dialog" aria-labelledby="moongcledeal_tag_modal">
            <div class="modal-dialog modal-dialog-centered modal-m" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title fs-6" id="exampleModalLabel">ÏàòÏöî Í≥µÎûµ ÌÉúÍ∑∏</h5>
                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                            <span>√ó</span>
                        </button>
                    </div>
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-body">
                                <div class="d-flex flex-wrap">
                                    <div class="w-100">
                                        <i class="fa-solid fa-check"></i>
                                        <label for="benefitChoice" class="custom-control-label">ÏÑ†ÌÉù</label>
                                    </div>
                                    <div class="w-100 mt-3 p-2 py-3" style="border: 1px solid #dee2e6; border-radius: 10px;">
                                        <!-- tab -->
                                        <div class="nav-wrapper position-relative end-0 w-100 custom">
                                            <ul class="nav nav-pills nav-fill p-1 bg-white d-inline-block w-100" role="tablist">
                                                <li class="nav-item d-inline-block">
                                                    <a class="nav-link mb-0 px-3 py-1 active" data-bs-toggle="tab" href="#companionTags" role="tab" aria-controls="companionTags" aria-selected="true">
                                                        ÎèôÎ∞òÏûê
                                                    </a>
                                                </li>
                                                <li class="nav-item d-inline-block">
                                                    <a class="nav-link mb-0 px-3 py-1" data-bs-toggle="tab" href="#travelTasteTags" role="tab" aria-controls="travelTasteTags" aria-selected="false">
                                                        Ïó¨Ìñâ
                                                    </a>
                                                </li>
                                                <li class="nav-item d-inline-block">
                                                    <a class="nav-link mb-0 px-3 py-1" data-bs-toggle="tab" href="#eventTags" role="tab" aria-controls="eventTags" aria-selected="false">
                                                        Ïù¥Î≤§Ìä∏
                                                    </a>
                                                </li>
                                                <li class="nav-item d-inline-block">
                                                    <a class="nav-link mb-0 px-3 py-1" data-bs-toggle="tab" href="#stayTasteTags" role="tab" aria-controls="stayTasteTags" aria-selected="false">
                                                        ÏàôÏÜå Ï∑®Ìñ•
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>

                                        <hr class="horizontal dark my-3">

                                        <!-- tab content -->
                                         <div class="tab-content tabChoice p-3" id="nav-tabContent">
                                            <!-- companionTags -->
                                            <div class="tab-pane relatedTag fade show active" id="companionTags" role="tabpanel" aria-labelledby="nav-basic-tab">
                                                <ul>
                                                    <?php foreach ($data['tags']['companionTags'] as $companionTag) : ?>
                                                        <li class="text-sm d-inline-block" data-name="<?= $companionTag['tag_machine_name']; ?>">
                                                            <span class="d-inline-block py-1 px-4"><?= $companionTag['tag_name']; ?></span>
                                                        </li>
                                                    <?php endforeach; ?>
                                                </ul>
                                            </div> 

                                            <!-- travelTasteTags -->
                                            <div class="tab-pane relatedTag fade" id="travelTasteTags" role="tabpanel" aria-labelledby="nav-basic-tab">
                                                <ul>
                                                    <?php foreach ($data['tags']['travelTasteTags'] as $travelTasteTag) : ?>
                                                        <li class="text-sm d-inline-block" data-name="<?= $travelTasteTag['tag_machine_name']; ?>">
                                                            <span class="d-inline-block py-1 px-4"><?= $travelTasteTag['tag_name']; ?></span>
                                                        </li>
                                                    <?php endforeach; ?>
                                                </ul>
                                            </div> 

                                            <!-- eventTags -->
                                            <div class="tab-pane relatedTag fade" id="eventTags" role="tabpanel" aria-labelledby="nav-basic-tab">
                                                <ul>
                                                    <?php foreach ($data['tags']['eventTags'] as $eventTag) : ?>
                                                        <li class="text-sm d-inline-block" data-name="<?= $eventTag['tag_machine_name']; ?>">
                                                            <span class="d-inline-block py-1 px-4"><?= $eventTag['tag_name']; ?></span>
                                                        </li>
                                                    <?php endforeach; ?>
                                                </ul>
                                            </div> 

                                            <!-- stayTasteTags -->
                                            <div class="tab-pane relatedTag fade" id="stayTasteTags" role="tabpanel" aria-labelledby="nav-basic-tab">
                                                <ul>
                                                    <?php foreach ($data['tags']['stayTasteTags'] as $stayTasteTag) : ?>
                                                        <li class="text-sm d-inline-block" data-name="<?= $stayTasteTag['tag_machine_name']; ?>">
                                                            <span class="d-inline-block py-1 px-4"><?= $stayTasteTag['tag_name']; ?></span>
                                                        </li>
                                                    <?php endforeach; ?>
                                                </ul>
                                            </div> 
                                        </div>
                                    </div>    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-link mr-auto mb-0" data-bs-dismiss="modal">Îã´Í∏∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Î∞úÏÜ° ÎåÄÏÉÅ -->
        <div class="modal fade" id="moongcledeal_target_modal" tabindex="-1" role="dialog" aria-labelledby="moongcledeal_target_modal">
            <div class="modal-dialog modal-dialog-centered modal-m" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title fs-6" id="exampleModalLabel">Î∞úÏÜ° ÎåÄÏÉÅ</h5>
                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                            <span>√ó</span>
                        </button>
                    </div>
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-body">
                                <div class="form-check">
                                    <input type="radio" id="push_only" class="form-check-input" name="target" data-target="#moongcledeal_target" data-name="ÏàòÏöî Îß§Ïπ≠ Í≥†Í∞ùÏóêÍ≤å Î∞úÏÜ°">
                                    <label for="push_only" class="custom-control-label">
                                        ÏàòÏöî Îß§Ïπ≠ Í≥†Í∞ùÏóêÍ≤å Î∞úÏÜ°
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="all" class="form-check-input" name="target" data-target="#moongcledeal_target" data-name="Ï†ÑÏ≤¥ Î∞úÏÜ° (ÏàòÏöî Îß§Ïπ≠ Í≥†Í∞ù + ÌÉêÏÉâ Í≥†Í∞ù)" checked>
                                    <label for="all" class="custom-control-label">
                                        Ï†ÑÏ≤¥ Î∞úÏÜ° (ÏàòÏöî Îß§Ïπ≠ Í≥†Í∞ù + ÌÉêÏÉâ Í≥†Í∞ù)
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-link mr-auto mb-0" data-bs-dismiss="modal">Îã´Í∏∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Î¨¥Î£å Ìë∏Ïãú Î©îÏãúÏßÄ -->
        <div class="modal fade" id="moongcledeal_text_modal" tabindex="-1" role="dialog" aria-labelledby="moongcledeal_text_modal">
            <div class="modal-dialog modal-dialog-centered modal-m" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title fs-6" id="exampleModalLabel">Î¨¥Î£å Ìë∏Ïãú Î©îÏãúÏßÄ</h5>
                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                            <span>√ó</span>
                        </button>
                    </div>
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-body">
                                <div class="form-check">
                                    <input type="radio" id="basic" class="form-check-input" name="notiText" data-name="Î≠âÌÅ¥ ÏãúÏä§ÌÖúÏóêÏÑú ÏïåÏïÑÏÑú Î©îÏãúÏßÄ Î∞úÏÜ°" checked>
                                    <label for="basic" class="custom-control-label">
                                        Î≠âÌÅ¥ ÏãúÏä§ÌÖúÏóêÏÑú ÏïåÏïÑÏÑú Î©îÏãúÏßÄ Î∞úÏÜ°
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="custom" class="form-check-input" name="notiText">
                                    <label for="custom" class="custom-control-label">
                                        ÏõêÌïòÎäî Î©îÏãúÏßÄ
                                    </label>
                                </div>
                                <div class="form-group mb-0 mt-3 textareaBox" style="display: none;">
                                    <input 
                                        type="text"
                                        id="customTitle"
                                        class="form-control mb-3"
                                        name="customTitle" 
                                        data-target="#moongcledeal_customTitle, #moongcledeal_customTitle_view" 
                                        placeholder="ÏïåÎ¶º ÌÉÄÏù¥ÌãÄÏùÑ ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî">
                                    <textarea 
                                        class="form-control" 
                                        id="customMessage" 
                                        name="customMessage" 
                                        rows="7" 
                                        placeholder="ÏïåÎ¶º Î©îÏãúÏßÄÎ•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî" 
                                        data-target="#moongcledeal_customMessage, #moongcledeal_customMessage_view"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-link mr-auto mb-0" data-bs-dismiss="modal">Îã´Í∏∞</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <?php include $_SERVER['DOCUMENT_ROOT'] . "/../app/Views/partner/blocks/loading.php"; ?>
    
    <!--   Core JS Files   -->
    <script src="/assets/manage/js/jquery-3.6.0.min.js"></script>
    <script src="/assets/manage/js/core/popper.min.js"></script>
    <script src="/assets/manage/js/core/bootstrap.min.js"></script>
    <script src="/assets/manage/js/plugins/perfect-scrollbar.min.js"></script>
    <script src="/assets/manage/js/plugins/smooth-scrollbar.min.js"></script>
    <script src="/assets/manage/js/plugins/choices.min.js"></script>
    <script src="/assets/manage/js/plugins/quill.min.js"></script>
    <script src="/assets/manage/js/plugins/flatpickr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
    
    <!-- Kanban scripts -->
    <script src="/assets/manage/js/plugins/dragula/dragula.min.js"></script>
    <script src="/assets/manage/js/plugins/jkanban/jkanban.js"></script>
    <script src="/assets/manage/js/plugins/chartjs.min.js"></script>
    <script src="/assets/manage/js/plugins/threejs.js"></script>
    <script src="/assets/manage/js/plugins/orbit-controls.js"></script>

    <script src="/assets/manage/js/soft-ui-dashboard.js?v=1.0.0"></script>

    <script>
        $(document).ready(function() {
            $('input, select, textarea').on("input change", function() {
                let targetSelectors = $(this).data('target');                

                if (targetSelectors) {
                    let targets = targetSelectors.split(',').map(selector => selector.trim());

                    targets.forEach(targetSelector => {
                        let targetElement = $(targetSelector); 

                        if (targetElement.length > 0) {
                            targetElement.text($(this).val());

                            if ($(this).val() !== "" || (typeof checkedValues !== "undefined" && checkedValues.length > 0)) {
                                targetElement.show();
                                targetElement.closest('.reflectionsWrap')?.show(); 
                            } else {
                                targetElement.hide();
                                targetElement.closest('.reflectionsWrap')?.hide(); 
                            }
                        }                        
                    });
                }
            });
        });

        // ÌåêÎß§ Í∏∞Í∞Ñ
        // Í∏∞Î≥∏Ï†ÅÏúºÎ°ú "ÏÉÅÏãú" Í∞í ÏÑ†ÌÉùÎêòÎèÑÎ°ù ÏÑ§Ï†ï
        $(document).ready(function() {            
            const defaultPeriod = 'ÏÉÅÏãú';
            const defaultPeriodTarget = $('input[name="period"][data-name="' + defaultPeriod + '"]');
            if (defaultPeriodTarget.length) {
                defaultPeriodTarget.prop('checked', true).trigger('change');
            }
        });

        $(document).on("change", 'input[name="period"]', function () {
            const periodName = $(this).data('name');
            const periodTarget = $(this).data('target');
            const reflectionsWrap = $(periodTarget).closest('.reflectionsWrap');
            
            $(".dateSelectBox").toggle($("#selectDate").is(":checked"));
            
            if (!$("#selectDate").is(":checked")) {
                if (window.flatpickrInstanceModal1) {
                    window.flatpickrInstanceModal1.clear();
                }
            } else {
                if (!window.flatpickrInstanceModal1) {
                    window.flatpickrInstanceModal1 = flatpickr("#calendar", {
                        dateFormat: "Y-m-d",
                    });
                    $(".dateSelectBox").show();
                }
            }

            if (periodName === "ÏÉÅÏãú") {
                reflectionsWrap.text(periodName).show();
            } else {
                $(periodTarget).closest('.reflectionsWrap').text("").hide();
            }
        });

       // Ìà¨Ïàô Í∞ÄÎä•Ïùº
        $(document).ready(function() {
            // Í∏∞Î≥∏Ï†ÅÏúºÎ°ú "ÏÉÅÏãú" Í∞íÏù¥ ÏÑ†ÌÉùÎêòÏñ¥ ÏûàÎèÑÎ°ù ÏÑ§Ï†ï
            const defaultPossiblePeriod = 'ÏÉÅÏãú';
            const defaultPossiblePeriodTarget = $('input[name="possible"][data-name="' + defaultPossiblePeriod + '"]');
            const allReflectionsWrap = $(defaultPossiblePeriodTarget.data('target')).closest('.reflectionsWrap');
            
            if (defaultPossiblePeriodTarget.length) {
                defaultPossiblePeriodTarget.prop('checked', true).trigger('change');
                allReflectionsWrap.text("ÏÉÅÏãú").show();
            } 

            $('input[name="possible"]').on("change", function () {
                const isChecked = $("#possibleSelectDate").is(":checked");
                const periodName = $(this).data('name');
                const periodTarget = $(this).data('target');
                const reflectionsWrap = $(periodTarget).closest('.reflectionsWrap');
                const allReflectionsWrap = $("#moongcledeal_possible_view");

                $(".possibleSelectBox").css("display", isChecked ? "inline-block" : "none");
                $("#moongcledeal_possible_modal_view").css("display", isChecked ? "inline-block" : "none");
                $(".possibleReflectionsWrap").css("display", isChecked ? "block" : "none");
                $(".possibleDateSelectBox").css("display", isChecked ? "block" : "none");
                $("#moongcledeal_possible_view").css("display", isChecked ? "none" : "block");

                if (!isChecked) {
                    window.flatpickrInstanceModal2.clear();
                    window.flatpickrInstanceModal3.clear();
                }

                if (periodName === "ÏÉÅÏãú") {
                    reflectionsWrap.text("ÏÉÅÏãú").show();
                } else {
                    reflectionsWrap.text("").hide();
                }
            });
        });

        // Ìè¨Ìï® ÌòúÌÉù
        $(document).on("click", "#benefitEnterBtn, .tab-pane.benefit ul li", function (e) {
            if ($(this).is("#benefitEnterBtn")) {
                addBenefit();
            } else if ($(this).is(".tab-pane.benefit ul li")) {  
                toggleBenefit($(this));
            }
        });

        // Ìï†Ïù∏Ïú® Ï†ÅÏö©
        $(document).on("change", 'input[name="discount"]', function () {
            let discountValue = $(this).val().trim();
            const $discountWrap = $("#moongcledeal_discount_view");
            const $discountView = $("#discountView");
            const $discountViewMini = $("#discountViewMini");
            const $benefitView = $("#moongcledeal_benefit_view");
            const reflectionsWrap = $discountWrap.closest('.reflectionsWrap');
            const $benefitList = $("#moongcledeal_benefit");

            if (!discountValue) {
                discountValue = "5";
            }

            let inputValue = `${discountValue}% Ìï†Ïù∏`;

            $discountWrap.text(inputValue);
            $discountView.text(`${discountValue}%`);
            $discountViewMini.text(`${discountValue}%`);

            let $discountItem = $benefitList.find(".benefit-list-item.defaultDiscount");

            if (Number(discountValue) !== 0) {
                if (!$discountItem.length) {
                    $benefitList.prepend(`<li class="benefit-list-item defaultDiscount">${inputValue}</li>`);
                } else {
                    $discountItem.text(inputValue);
                }
            } else { 
                $discountItem.remove();
            }

            const isDiscountZero = Number(discountValue) === 0;
            const isBenefitEmpty = !$benefitView.text().trim();

            if (!isDiscountZero || !isBenefitEmpty) {
                $discountWrap.show();
                reflectionsWrap.show();
            } else if (isDiscountZero || isBenefitEmpty) {
                $discountWrap.hide();
                reflectionsWrap.hide();
            }
        });

        // Ïà´Ïûê ÏûêÎ¶øÏàò Î∞è ÏùåÏàò ÏûÖÎ†• Î∞©ÏßÄ
        function blockNegative(event) {
            const invalidKeys = ['-', 'e'];

            if (invalidKeys.includes(event.key)) {
                event.preventDefault();
                alert('ÏñëÏàòÎßå ÏûÖÎ†• Í∞ÄÎä•Ìï©ÎãàÎã§.');
                return false;
            }
        }

        // Í∞í Í≤ÄÏ¶ù (5 ~ 100 ÏÇ¨Ïù¥ Í∞íÎßå ÌóàÏö©)
        $(document).on("blur", 'input[name="discount"]', function () {
            let value = parseFloat($(this).val());

            if (isNaN(value)) {
                $(this).val(5);
                return;
            }

            if (value > 100) {
                alert('Ìï†Ïù∏Ïú®ÏùÄ 100 Ïù¥ÌïòÎ°ú ÏÑ§Ï†ïÎêòÏñ¥Ïïº Ìï©ÎãàÎã§.');
                $(this).val(100);
            }

            if (value < 5) {
                alert('Ìï†Ïù∏Ïú®ÏùÄ 5 Ïù¥ÏÉÅÏúºÎ°ú ÏÑ§Ï†ïÎêòÏñ¥Ïïº Ìï©ÎãàÎã§.');
                $(this).val(5);
            }
        });

        // ÎπÑÏóàÏùÑ Îïå ÏûêÎèô 5 ÏÑ∏ÌåÖ
        $(document).on('blur', 'input[name="discount"]', function () {
            if ($(this).val().trim() === '' || parseFloat($(this).val()) < 5) {
                $(this).val(5);
            }
        });

        // ÏóîÌÑ∞ ÌÇ§ ÏûÖÎ†•
        $(document).on("keyup", "#benefitEnter", function (e) {
            if (e.key === "Enter" || e.keyCode === 13) {
                $("#benefitEnterBtn").trigger("click");
            }
        });

        // ÏÇ≠Ï†ú 
        $(document).on("click", ".remove-benefit", function () {
            const removedText = $(this).siblings("span").text().trim(); 
            const $benefitList = $("#moongcledeal_benefit");

            $(this).parent().remove();

            const index = benefitsTextArray.indexOf(removedText);
            if (index !== -1) {
                benefitsTextArray.splice(index, 1);
            }

            const $benefitView = $("#moongcledeal_benefit_view");
            let currentText = $benefitView.text();
            currentText = currentText.split(" | ").filter(text => text !== removedText).join(" | ");

            if (currentText) {
                $benefitView.text(currentText);
            } else {
                $benefitView.hide();
            }

            $(".benefitPreviewWrap")
                .children(".benefit-item.choiceCheck")
                .filter(function () {
                    return $(this).find("span").text().trim() === removedText;
                })
                .remove();

            if ($(".benefitPreviewWrap").children().length === 0) {
                $(".benefitPreviewWrap").hide();
            }

            $benefitList.find("li").filter(function () {
                return $(this).text().trim() === removedText;
            }).remove();

            $(".tab-pane.benefit ul li").each(function () {
                if ($(this).find("span").text().trim() === removedText) {
                    $(this).removeClass("active");
                }
            });
        });

        const benefitsTextArray = [];

        // ÌäπÏ†Ñ Ï†úÏïà (ÏßÅÏ†ë ÏûÖÎ†•)
        function addBenefit($element) {
            const $benefitView = $("#moongcledeal_benefit_view");
            const $benefitList = $("#moongcledeal_benefit");
            const inputValue = $("#benefitEnter").val().trim();
            const reflectionsWrap = $benefitView.closest(".reflectionsWrap");

            if (inputValue === "") return;

            if (inputValue) reflectionsWrap.show();  

            benefitsTextArray.push(inputValue);

            // previewÏóê Ï∂îÍ∞Ä
            const newBenefit = $(`
                <div class="d-inline-block py-1 px-4 benefit-item" style="border-radius: 100px; border: 1px solid #ededed;">
                    <span class="d-inline-block text-sm">${inputValue}</span>
                    <button type="button" class="remove-benefit" style="background: none; border: 0px; color: #959595;">
                        <i class="fa-solid fa-circle-xmark"></i>
                    </button>
                </div>
            `);

            $(".benefitPreviewWrap").append(newBenefit).show();

            // Î™®Îã¨ Î∞ñ ÎØ∏Î¶¨Î≥¥Í∏∞ Ï∂îÍ∞Ä
            if ($benefitView.is(":hidden")) {
                $benefitView.text(inputValue).show();
            } else {
                $benefitView.append($benefitView.text() ? " | " + inputValue : inputValue);
            }

            // Î™®Î∞îÏùº ÎØ∏Î¶¨Î≥¥Í∏∞ Ï∂îÍ∞Ä
            $benefitList.append(`
                <li class="benefit-list-item">${inputValue}</li>
            `);

            $("#benefitEnter").val("");
            
        }

        // Ï∫°Ïäê Î≤ÑÌäº ÏÑ†ÌÉù
        function toggleBenefit($element) {
            const $benefitView = $("#moongcledeal_benefit_view");
            const $benefitList = $("#moongcledeal_benefit");
            const benefitText = $element.find('span').text().trim();

            if (benefitText) $benefitView.show();

            if (!benefitsTextArray.includes(benefitText)) {
                benefitsTextArray.push(benefitText);
            }

            if ($element.hasClass('active')) {
                let currentText = $benefitView.text();

                let updatedText = currentText.split(" | ").filter(item => item.trim() !== benefitText).join(" | ").trim();

                if (updatedText) {
                    $benefitView.text(updatedText);
                } else {
                    $benefitView.text('');
                    $benefitView.hide();
                }

                $benefitList.find("li").filter(function () {
                    return $(this).text().trim() === benefitText;
                }).remove();

                $(".benefitPreviewWrap .benefit-item").filter(function () {
                    return $(this).find("span").text().trim() === benefitText;
                }).remove();

                const index = benefitsTextArray.indexOf(benefitText);
                if (index !== -1) {
                    benefitsTextArray.splice(index, 1);
                }

                $element.removeClass('active');
            } else {
                if ($benefitView.is(":hidden")) {
                    $benefitView.text(benefitText).show();
                } else {
                    $benefitView.append($benefitView.text() ? " | " + benefitText : benefitText);
                }

                $benefitList.append(`
                    <li class="benefit-list-item">${benefitText}</li>
                `);

                // previewÏóê Ï∂îÍ∞Ä
                const newBenefit = $(`
                    <div class="d-inline-block py-1 px-4 benefit-item choiceCheck" style="border-radius: 100px; border: 1px solid #ededed;">
                        <span class="d-inline-block text-sm">${benefitText}</span>
                        <button type="button" class="remove-benefit" style="background: none; border: 0px; color: #959595;">
                            <i class="fa-solid fa-circle-xmark"></i>
                        </button>
                    </div>
                `);

                $(".benefitPreviewWrap").append(newBenefit).show();

                $element.addClass('active');
            }
        }

        // Í∏∞Î∞ò ÏöîÍ∏àÏ†ú ÏÑ†ÌÉù
        $(document).ready(function () {
            const checkedRateplan = $('input[name="rateplan"]:checked');
            
            if (checkedRateplan.length > 0) {
                const rateplanName = checkedRateplan.data("name");
                const rateplanTarget = checkedRateplan.data("target");

                if (rateplanName) {
                    const reflectionsWrap = $(rateplanTarget).closest(".reflectionsWrap");
                    reflectionsWrap.text(rateplanName).show();
                }

                displayRooms(checkedRateplan);
            }

            $(document).on("change", 'input[name="rateplan"]', function () {
                const rateplanName = $(this).data("name");
                const rateplanTarget = $(this).data("target");

                if (rateplanName) {
                    const reflectionsWrap = $(rateplanTarget).closest(".reflectionsWrap");
                    reflectionsWrap.text(rateplanName).show();
                }

                displayRooms($(this));
            });
        }); 

        // Ï†ÅÏö© Í∞ùÏã§ ÏÑ†ÌÉù
        // rooms Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
        function displayRooms($rateplan) {
            const roomsJson = JSON.parse($rateplan.data('rooms'));  
            let rooms = JSON.parse(roomsJson);

            const $roomsContainer = $("#moongcledeal_rateplan_rooms");
            $roomsContainer.empty(); 

            const $reflectionsWrap = $("#moongcledeal_room"); 
            $reflectionsWrap.text("").hide(); 

            let allRoomsNotExist = true; 

            rooms.forEach(function(room) {
                if (room.room_rateplan_status !== 'notExist') {
                    const roomHtml = `
                        <div class="form-check">
                            <input type="checkbox" id="room-${room.room_idx}" class="form-check-input" name="room" data-name="${room.room_name}" data-target="#moongcledeal_room" checked>
                            <label for="room-${room.room_idx}" class="custom-control-label">
                                ${room.room_name}
                            </label>
                        </div>
                    `;
                    $roomsContainer.append(roomHtml);
                    allRoomsNotExist = false; 
                }
            });

            if (allRoomsNotExist) {
                const roomHtml = `
                    <div class="py-5 text-center text-sm">
                        Ï†ÅÏö© Í∞ÄÎä•Ìïú Í∞ùÏã§Ïù¥ Ï°¥Ïû¨ÌïòÏßÄ ÏïäÏäµÎãàÎã§.
                    </div>
                `;
                $roomsContainer.append(roomHtml);
            }
        }

        // Ï†ÅÏö© Í∞ùÏã§ ÏÑ†ÌÉù
         $(document).on("change", 'input[name="room"]', function () {
            updateReflections();
        });

        function updateReflections() {
            $('input[name="room"]').each(function () {
                const roomName = $(this).data("name");
                const roomTarget = $(this).data("target");
                const reflectionsWrap = $(roomTarget).closest(".reflectionsWrap");

                if (!roomName) return;

                let selectedRooms = [];

                $('input[name="room"][data-target="' + roomTarget + '"]:checked').each(function () {
                    selectedRooms.push($(this).data("name"));
                });

                if (selectedRooms.length) {
                    reflectionsWrap.text(selectedRooms.join(" | ")).show();
                } else {
                    reflectionsWrap.text("").hide();
                }
            });
        }

        // ÌéòÏù¥ÏßÄ ÏßÑÏûÖ Ïãú Ï¥àÍ∏∞ ÏÑ∏ÌåÖ
        $(document).ready(function () {
            updateReflections();
        });

        const tagsTextArray = [];

        // ÏàòÏöî Í≥µÎûµ ÌÉúÍ∑∏ ÏÑ†ÌÉù
        $(document).on("click", ".tab-pane.relatedTag ul li", function (e) {
            const tagMachineName = $(this).data("name");
            const tagText = $(this).find('span').text().trim();  
            const $tagView = $("#moongcledeal_tag_view");
            const $tagList = $("#moongcledeal_tag");

            if ($(this).hasClass('active')) {  
                let currentText = $tagView.text()
                    .replace(new RegExp("(?:^|\\s)#" + tagText.replace(/[.*+?^${}()|[\]\\]/g, "\\$&") + "(?=\\s|$)", "g"), "")
                    .trim();

                if (!currentText) $tagView.hide();
                else $tagView.text(currentText);

                $tagList.find("span").filter(function () {
                    return $(this).text().trim() === "#" + tagText; 
                }).remove();

                const index = tagsTextArray.indexOf(tagMachineName);
                if (index !== -1) {
                    tagsTextArray.splice(index, 1);
                }

                $(this).removeClass('active');
            } else {
                if ($tagView.is(":hidden")) {
                    $tagView.text("#" + tagText).show(); 
                } else {
                    $tagView.append(" " + "#" + tagText);
                }

                $tagList.append(`<span class="d-inline-block tag-list-item">#${tagText}</span>`);

                tagsTextArray.push(tagMachineName);

                $(this).addClass('active');
            }
        });

        // Î∞úÏÜ° ÎåÄÏÉÅ Ï¥àÍ∏∞
        $(document).ready(function() {
            const selectedTarget = $('input[name="target"]:checked');
            if (selectedTarget.length > 0) {
                const audienceName = selectedTarget.data('name');
                const audienceTarget = selectedTarget.data('target');

                if (audienceName) {
                    const reflectionsWrap = $(audienceTarget).closest('.reflectionsWrap');
                    reflectionsWrap.text(audienceName);
                    reflectionsWrap.show();
                }
            }
        });
            
        // Î∞úÏÜ° ÎåÄÏÉÅ ÏÑ†ÌÉù
        $(document).on("change", 'input[name="target"]', function () {
            const audienceName = $(this).data('name');
            const audienceTarget = $(this).data('target');

            if (audienceName) {
                const reflectionsWrap = $(audienceTarget).closest('.reflectionsWrap');

                reflectionsWrap.text(audienceName);
                $(audienceTarget).closest('.reflectionsWrap')?.show();
            } 
        });

         // Î¨¥Î£å Ìë∏Ïãú Î©îÏãúÏßÄ
         $(document).ready(function () {
            const textareaBox = $(".textareaBox");
            const reflectionsWrap = $(".notiReflectionsWrap");
            const notiName = $('input[id="basic"]:checked').data('name');

            reflectionsWrap.text(notiName || "").show();

            // ÏïåÎ¶º ÏÑ†ÌÉù Ïù¥Î≤§Ìä∏
            $(document).on("change", 'input[name="notiText"]', function () {
                const isCustom = $(this).attr("id") === "custom";

                if (isCustom) {
                    textareaBox.show();
                    reflectionsWrap.text("").show();
                    
                    $("#moongcledeal_customTitle_view").text($("#customTitle").val());
                    $("#moongcledeal_customMessage_view").text($("#customMessage").val());
                } else {
                    textareaBox.hide();
                    reflectionsWrap.text(notiName || "").show();
                    $("#customTitle, #customMessage").val("");

                    $("#moongcledeal_customTitle_view").text("");
                    $("#moongcledeal_customMessage_view").text("");
                }
            });

            $(document).on("input", "#customTitle", function () {
                $("#moongcledeal_customTitle_view").text($(this).val());
            });

            $(document).on("input", "#customMessage", function () {
                $("#moongcledeal_customMessage_view").text($(this).val());
            });
        });

        // Ïª§Ïä§ÌÖÄ Î©îÏÑ∏ÏßÄ Ï§áÎ∞îÍøà ÎßâÍ∏∞
        const textarea = document.getElementById('customMessage');

        textarea.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
            }
        });

        textarea.addEventListener('input', function() {
            this.value = this.value.replace(/[\r\n]+/g, ' ');
        });
    </script>

    <script>
        // Ïò§Îäò ÎÇ†Ïßú class Ï†úÍ±∞
        function removeTodayClass(instance) {
            setTimeout(() => {
                const todayElements = instance.calendarContainer.querySelectorAll('.today');
                todayElements.forEach(element => element.classList.remove('today'));
            }, 10);
        }

        // ÌåêÎß§ Í∏∞Í∞Ñ Îã¨Î†•
        var periodModalSelector = document.querySelector('#period-date');
        var selectedPeriod = {};

        var startDate = new Date();
        var endDate = new Date(startDate);
        endDate.setDate(startDate.getDate() + 1); 
    
        window.flatpickrInstanceModal1 = flatpickr(periodModalSelector, {
            mode: 'range', 
            showMonths: 3,
            static: true,  
            monthSelectorType: 'static',
            dateFormat: "Y-m-d", 
            defaultDate: [
                startDate,
                endDate
            ],
            locale: 'ko',
            onReady: function(selectedDates, dateStr, instance) {
                instance.element.value = dateStr.replace('to', '~'); 

                const customClass = instance.element.getAttribute('data-class');
                instance.calendarContainer.classList.add(customClass || 'default-class');

                if (selectedDates.length === 2) {
                    selectedPeriod.startDate = selectedDates[0]; 
                    selectedPeriod.endDate = selectedDates[1]; 
                } else {
                    selectedPeriod.startDate = null; 
                    selectedPeriod.endDate = null; 
                }
            },
            onChange: function(selectedDates, dateStr, instance) {
                instance.element.value = dateStr.replace('to', '~');

                removeTodayClass(instance);

                if (selectedDates.length === 2) {
                    selectedPeriod.startDate = selectedDates[0]; 
                    selectedPeriod.endDate = selectedDates[1];  
                } else {
                    selectedPeriod.startDate = null; 
                    selectedPeriod.endDate = null; 
                }
            },
            onDayCreate: function (dObj, dStr, fp, dayElem) {
                dayElem.classList.remove('today');
            }
        });

        // Ìà¨Ïàô Í∞ÄÎä•Ïùº Îã¨Î†•
        var possibleModalSelector = document.querySelector('#possible-date');        
        var selectedPossible = {};
    
        window.flatpickrInstanceModal2 = flatpickr(possibleModalSelector, {
            inline: true,
            mode: 'range', 
            showMonths: 3,
            static: true,  
            monthSelectorType: 'static',
            dateFormat: "Y-m-d", 
            defaultDate: null,
            locale: 'ko',
            onReady: function(selectedDates, dateStr, instance) {
                removeTodayClass(instance);
                
                instance.element.value = dateStr.replace('to', '~'); 

                const customClass = instance.element.getAttribute('data-class');
                instance.calendarContainer.classList.add(customClass || 'default-class');

                if (selectedDates.length === 2) {
                    selectedPossible.startDate = selectedDates[0]; 
                    selectedPossible.endDate = selectedDates[1]; 
                } else {
                    selectedPossible.startDate = null; 
                    selectedPossible.endDate = null; 
                }
            },
            onChange: function(selectedDates, dateStr, instance) {
                const blackoutCheck = document.querySelector("#blackout");
                
                instance.element.value = dateStr.replace('to', '~');

                removeTodayClass(instance);

                if (selectedDates.length === 1) {
                    if (blackoutCheck) {
                        blackoutCheck.disabled = true;
                        window.flatpickrInstanceModal3.clear();
                    }
                }

                if (selectedDates.length === 2) {
                    selectedPossible.startDate = selectedDates[0]; 
                    selectedPossible.endDate = selectedDates[1];  

                    var startSelected = selectedDates[0];
                    var endSelected = selectedDates[1];

                    window.flatpickrInstanceModal3.set('minDate', startSelected);
                    window.flatpickrInstanceModal3.set('maxDate', endSelected);

                    if (blackoutCheck) {
                        blackoutCheck.disabled = false;
                    }
                } else {
                    selectedPossible.startDate = null; 
                    selectedPossible.endDate = null; 
                }
            },
            onDayCreate: function (dObj, dStr, fp, dayElem) {
                dayElem.classList.remove('today');
            }
        });

        // Ï†úÏô∏ ÎÇ†Ïßú ÏßÄÏ†ï Îã¨Î†•
        var blackoutSelector = document.querySelector('#blackout-date');        
        var selectedBlackout = [];

        window.flatpickrInstanceModal3 = flatpickr(blackoutSelector, {
            inline: true,
            mode: 'multiple', 
            showMonths: 3,
            static: true,  
            monthSelectorType: 'static',
            dateFormat: "Y-m-d", 
            defaultDate: null,
            locale: 'ko',
            onReady: function(selectedDates, dateStr, instance) {
                removeTodayClass(instance);
                
                const customClass = instance.element.getAttribute('data-class');
                instance.calendarContainer.classList.add(customClass || 'default-class');
            },
            onChange: function(selectedDates, dateStr, instance) {
                removeTodayClass(instance);

                selectedBlackout = selectedDates.map(date => {
                    const year = date.getFullYear();
                    const month = String(date.getMonth() + 1).padStart(2, '0'); 
                    const day = String(date.getDate()).padStart(2, '0');
                    return `${year}-${month}-${day}`;
                });
            },
            onDayCreate: function (dObj, dStr, fp, dayElem) {
                dayElem.classList.remove('today');
            }
        });

        // Ï†úÏô∏ ÎÇ†Ïßú ÏßÄÏ†ï Ï≤¥ÌÅ¨ Ïãú Îã¨Î†• ÎÖ∏Ï∂ú
        const blackoutCheck = document.querySelector("#blackout");
        const blackoutCalendar = document.querySelector(".blackoutCalendar"); 

        blackoutCheck.addEventListener('change', function() {
            if (this.checked) {
                blackoutCalendar.style.display = "block"; 
            } else {
                blackoutCalendar.style.display = "none"; 

                if (window.flatpickrInstanceModal3) {
                    window.flatpickrInstanceModal3.clear();
                }
            }
        });
    </script>

    <script>
        // ÏÉùÏÑ±ÌïòÍ∏∞
        document.getElementById('submitForm').addEventListener('click', async function(e) {
        
            const submitBtn = e.currentTarget;

            // Í∏∞Î≥∏ Ìï†Ïù∏Ïú®
            const discountRate = Number(document.getElementById('discount').value) || 5;

            const formatDate = (date) => {
                if (!(date instanceof Date) || isNaN(date)) return null; 
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            };

            // Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù - Î∞úÏÜ° ÌÉÄÏù¥ÌãÄ, Î©îÏãúÏßÄ
            const customRadio = document.getElementById('custom');
            if (customRadio.checked) {
                const customTitle = document.getElementById('customTitle')?.value.trim() || "";
                const customMessage = document.getElementById('customMessage')?.value.trim() || "";

                if (!customTitle || !customMessage) {
                    alert("ÏïåÎ¶º ÌÉÄÏù¥ÌãÄÍ≥º Î©îÏãúÏßÄÎ•º Î™®Îëê ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.");
                    return; 
                }
            }

            const formData = {
                partnerIdx: Number(<?php echo json_encode($selectedPartnerIdx); ?>), // index
                moongcleoffer: {
                    title: document.getElementById('moongcledeal_name')?.value || "", // Î≠âÌÅ¥Îîú Ï†úÏïàÎ™Ö
                    rateplanIdx: Number(document.querySelector('input[name="rateplan"]:checked')?.id || ''), // ÏÑ†ÌÉùÎêú Í∏∞Î∞ò ÏöîÍ∏àÏ†ú
                    saleStartDate: formatDate(selectedPeriod.startDate), // ÌåêÎß§ Í∏∞Í∞Ñ ÏãúÏûëÏùº
                    saleEndDate: formatDate(selectedPeriod.endDate), // ÌåêÎß§ Í∏∞Í∞Ñ ÎßàÍ∞êÏùº
                    stayStartDate: formatDate(selectedPossible.startDate), // Ìà¨Ïàô Í∞ÄÎä• Í∏∞Í∞Ñ ÏãúÏûëÏùº
                    stayEndDate: formatDate(selectedPossible.endDate), // Ìà¨Ïàô Í∞ÄÎä• Í∏∞Í∞Ñ ÎßàÍ∞êÏùº
                    blackoutDates: selectedBlackout, // Ï†úÏô∏ ÎÇ†Ïßú
                    discountRate: Number(document.getElementById('discount').value), // Ìï†Ïù∏Ïú® %
                    benefits: [
                        ...(discountRate > 0 ? [`${discountRate}% Ìï†Ïù∏`] : []), 
                        ...benefitsTextArray
                    ],
                    rooms: [], // Ï†ÅÏö© Í∞ùÏã§
                    tags: [ ...tagsTextArray ], // ÏàòÏöî Í≥µÎûµ ÌÉúÍ∑∏
                    audience: document.querySelector('input[name="target"]:checked')?.id, // Î∞úÏÜ° ÎåÄÏÉÅ
                    customTitle: document.getElementById('customTitle')?.value || "", // Î¨¥Î£å Ìë∏Ïãú Î©îÏãúÏßÄ ÌÉÄÏù¥ÌãÄ
                    customMessage:document.getElementById('customMessage')?.value || "" , // Î¨¥Î£å Ìë∏Ïãú Î©îÏãúÏßÄ ÌÖçÏä§Ìä∏
                }
            }            

            // Ï†ÅÏö© Í∞ùÏã§(rooms) Îç∞Ïù¥ÌÑ∞
            document.querySelectorAll('input[name="room"]:checked').forEach((checkbox) => {
                const roomId = Number(checkbox.id.replace("room-", ""));
                formData.moongcleoffer.rooms.push(roomId);
            });

            // Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù
            if (
                !formData.moongcleoffer.rateplanIdx ||
                formData.moongcleoffer.rooms.length === 0 ||
                formData.moongcleoffer.tags.length === 0) {

                alert('Î™®Îì† Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.');
                return;
            }

            try {
                // ÏÑúÎ≤ÑÎ°ú POST ÏöîÏ≤≠
                const response = await fetch('/api/partner/create-moongcleoffer', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                });

                // ÏùëÎãµÏù¥ JSONÏù∏ÏßÄ ÌôïÏù∏
                const contentType = response.headers.get('content-type');
                let result;

                if (contentType && contentType.includes('application/json')) {
                    result = await response.json();
                } else {
                    result = await response.text();
                    console.warn('ÏùëÎãµÏù¥ JSON ÌòïÏãùÏù¥ ÏïÑÎãôÎãàÎã§:', result);
                }

                if (response.ok) {                   
                    alert('Ïã†Í∑ú Î≠âÌÅ¥ÎîúÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§.');
                    loading.style.display = 'flex'; 
                    window.location.href = '/partner/moongcleoffers';
                } else {
                    alert(result?.error || 'Î≠âÌÅ¥Îîú ÏÉùÏÑ± Ï§ë Î¨∏Ï†úÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
                }
            } catch (error) {
                console.error('Î≠âÌÅ¥Îîú ÏÉùÏÑ± Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
                alert('Î≠âÌÅ¥Îîú ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        });
    </script>

    <script>
        $(document).ready(function () {     
            $('.modal').on('hide.bs.modal', function () {
                $('div, button, input, select, textarea').each(function () {
                    $(this).blur();
                });
            });
        });
    </script>
</body>
</html>